{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/mypage/profile/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"container\": \"page-module__CdI7za__container\",\n  \"error\": \"page-module__CdI7za__error\",\n  \"formGroup\": \"page-module__CdI7za__formGroup\",\n  \"helpText\": \"page-module__CdI7za__helpText\",\n  \"inputField\": \"page-module__CdI7za__inputField\",\n  \"message\": \"page-module__CdI7za__message\",\n  \"pageTitle\": \"page-module__CdI7za__pageTitle\",\n  \"profileForm\": \"page-module__CdI7za__profileForm\",\n  \"readOnlyInput\": \"page-module__CdI7za__readOnlyInput\",\n  \"saveButton\": \"page-module__CdI7za__saveButton\",\n  \"success\": \"page-module__CdI7za__success\",\n  \"withdrawButton\": \"page-module__CdI7za__withdrawButton\",\n  \"withdrawSection\": \"page-module__CdI7za__withdrawSection\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/ZeroMoa/Front/app/mypage/profile/page.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAppSelector, useAppDispatch } from '../../app/store/store';\r\nimport { selectUser, selectIsLoggedIn, setUser } from '../../app/store/authSlice';\r\nimport styles from './page.module.css';\r\n\r\ninterface UserProfile {\r\n    username: string;\r\n    nickname: string;\r\n    email: string;\r\n    isSocial: boolean;\r\n}\r\n\r\nexport default function ProfilePage() {\r\n    const router = useRouter();\r\n    const dispatch = useAppDispatch();\r\n    const currentUser = useAppSelector(selectUser);\r\n    const isLoggedIn = useAppSelector(selectIsLoggedIn);\r\n\r\n    const [profile, setProfile] = useState<UserProfile | null>(null);\r\n    const [newPassword, setNewPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!isLoggedIn) {\r\n            router.push('/login'); // 로그인 상태가 아니면 로그인 페이지로 리다이렉트\r\n            return;\r\n        }\r\n\r\n        if (currentUser) {\r\n            setProfile({\r\n                username: currentUser.id,\r\n                nickname: currentUser.username, // 임시로 username을 닉네임으로 사용\r\n                email: currentUser.email || '', // 백엔드 스펙에 따라 이메일 필드가 User 타입에 추가되어야 함\r\n                isSocial: currentUser.isSocial || false, // 백엔드 스펙에 따라 isSocial 필드가 User 타입에 추가되어야 함\r\n            });\r\n            setLoading(false);\r\n        } else {\r\n            // currentUser가 없지만 isLoggedIn인 경우 (예: 페이지 새로고침 후 user 정보 로딩 전)\r\n            // 실제 백엔드 연동 시 여기에 사용자 정보를 불러오는 API 호출 로직이 필요\r\n            // 현재는 임시 데이터로 처리하거나, Redux 스토어에 user 정보가 비동기로 로드되도록 해야 함.\r\n            setLoading(false); // 로딩 상태 종료\r\n        }\r\n    }, [isLoggedIn, currentUser, router]);\r\n\r\n    if (loading) {\r\n        return <div className={styles.container}>로딩 중...</div>;\r\n    }\r\n\r\n    if (!profile) {\r\n        return <div className={styles.container}>사용자 정보를 불러올 수 없습니다.</div>;\r\n    }\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        if (profile) {\r\n            setProfile(prev => prev ? { ...prev, [name]: value } : null);\r\n        }\r\n    };\r\n\r\n    const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setNewPassword(e.target.value);\r\n    };\r\n\r\n    const handleConfirmPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setConfirmPassword(e.target.value);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setMessage(null);\r\n\r\n        if (newPassword && newPassword !== confirmPassword) {\r\n            setMessage({ type: 'error', text: '새 비밀번호와 비밀번호 확인이 일치하지 않습니다.' });\r\n            return;\r\n        }\r\n\r\n        // 가상의 PUT /user API 호출\r\n        try {\r\n            // 실제 백엔드 연동 시 accessToken, refreshToken, XSRF-TOKEN 처리 필요\r\n            // const accessToken = localStorage.getItem('accessToken');\r\n            // const xsrfToken = getCookie('XSRF-TOKEN'); // 쿠키에서 XSRF-TOKEN을 읽어오는 함수 필요\r\n\r\n            const requestBody: any = {\r\n                username: profile.username,\r\n                nickname: profile.nickname,\r\n            };\r\n\r\n            if (!profile.isSocial && profile.email !== currentUser?.email) { // 소셜 로그인이 아니면서 이메일 변경 시에만 포함\r\n                requestBody.email = profile.email;\r\n            }\r\n            \r\n            if (!profile.isSocial && newPassword) { // 자체 로그인 사용자만 비밀번호 수정 가능\r\n                requestBody.password = newPassword; // 실제 백엔드에서는 비밀번호 변경 로직이 별도일 수 있음\r\n            }\r\n\r\n            console.log(\"User Update Request Body:\", requestBody);\r\n            // 실제 API 호출 로직 (fetch 또는 axios 사용)\r\n            // const response = await fetch('http://localhost:8080/user', {\r\n            //     method: 'PUT',\r\n            //     headers: {\r\n            //         'Content-Type': 'application/json',\r\n            //         'X-XSRF-TOKEN': xsrfToken, // CSRF 보호\r\n            //         'Authorization': `Bearer ${accessToken}`, // 인증 토큰\r\n            //     },\r\n            //     body: JSON.stringify(requestBody),\r\n            // });\r\n\r\n            // if (!response.ok) {\r\n            //     const errorData = await response.json();\r\n            //     throw new Error(errorData.error || '사용자 정보 수정 실패');\r\n            // }\r\n\r\n            // const result = await response.json();\r\n            // console.log(\"User Update Success:\", result);\r\n\r\n            // 임시 성공 처리 (실제 API 응답이 없으므로)\r\n            dispatch(setUser({ ...currentUser, username: profile.nickname })); // 닉네임만 업데이트 (임시)\r\n            setMessage({ type: 'success', text: '사용자 정보가 성공적으로 수정되었습니다.' });\r\n            setNewPassword('');\r\n            setConfirmPassword('');\r\n\r\n        } catch (error: any) {\r\n            console.error(\"Error updating user profile:\", error);\r\n            setMessage({ type: 'error', text: error.message || '사용자 정보 수정 중 오류가 발생했습니다.' });\r\n        }\r\n    };\r\n\r\n    const handleWithdrawClick = () => {\r\n        router.push('/mypage/withdraw');\r\n    };\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <h1 className={styles.pageTitle}>내 정보 확인 및 수정</h1>\r\n            {message && (\r\n                <div className={`${styles.message} ${message.type === 'success' ? styles.success : styles.error}`}>\r\n                    {message.text}\r\n                </div>\r\n            )}\r\n            <form onSubmit={handleSubmit} className={styles.profileForm}>\r\n                <div className={styles.formGroup}>\r\n                    <label htmlFor=\"username\">아이디</label>\r\n                    <input type=\"text\" id=\"username\" name=\"username\" value={profile.username} disabled className={styles.readOnlyInput} />\r\n                </div>\r\n\r\n                <div className={styles.formGroup}>\r\n                    <label htmlFor=\"nickname\">닉네임</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"nickname\"\r\n                        name=\"nickname\"\r\n                        value={profile.nickname}\r\n                        onChange={handleChange}\r\n                        className={styles.inputField}\r\n                    />\r\n                </div>\r\n\r\n                <div className={styles.formGroup}>\r\n                    <label htmlFor=\"email\">이메일</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        value={profile.email}\r\n                        onChange={handleChange}\r\n                        disabled={profile.isSocial} /* 소셜 로그인 사용자는 이메일 수정 불가 */\r\n                        className={`${styles.inputField} ${profile.isSocial ? styles.readOnlyInput : ''}`}\r\n                    />\r\n                    {profile.isSocial && <span className={styles.helpText}>소셜 로그인 사용자는 이메일을 변경할 수 없습니다.</span>}\r\n                </div>\r\n\r\n                {!profile.isSocial && (\r\n                    <>\r\n                        <div className={styles.formGroup}>\r\n                            <label htmlFor=\"newPassword\">새 비밀번호</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                id=\"newPassword\"\r\n                                name=\"newPassword\"\r\n                                value={newPassword}\r\n                                onChange={handlePasswordChange}\r\n                                className={styles.inputField}\r\n                                placeholder=\"새 비밀번호 (변경 시에만 입력)\"\r\n                            />\r\n                        </div>\r\n                        <div className={styles.formGroup}>\r\n                            <label htmlFor=\"confirmPassword\">비밀번호 확인</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                id=\"confirmPassword\"\r\n                                name=\"confirmPassword\"\r\n                                value={confirmPassword}\r\n                                onChange={handleConfirmPasswordChange}\r\n                                className={styles.inputField}\r\n                                placeholder=\"새 비밀번호 확인\"\r\n                            />\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                <button type=\"submit\" className={styles.saveButton}>수정 내용 저장하기</button>\r\n            </form>\r\n            <div className={styles.withdrawSection}>\r\n                <button onClick={handleWithdrawClick} className={styles.withdrawButton}>회원 탈퇴</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}